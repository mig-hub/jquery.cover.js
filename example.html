<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cover</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" charset="utf-8">
      ;(function($) {
        $.fn.cover = function(options) {
          var defaults = {
            binding: 'click.cover',
            div_id: 'cover_plugin_bloc',
            speed: 200
          };
          var settings = $.extend({}, defaults, options);
          return this.each(function() {
            var $this = $(this);
            if (!$this.is('img')) throw new Error("Cover was used with a node which is not an image.")
            $this.bind(settings.binding, function() {
              var href = $this.data().cover || $this.attr('src');
              var cover = $("<div id='"+settings.div_id+"'></div>");
              cover.css({
                position: 'fixed',
                backgroundImage: "url("+href+")",
                backgroundRepeat: "no-repeat", backgroundPosition: "center center",
                backgroundSize: 'cover',
                left: $this.offset().left-$(window).scrollLeft()+'px',
                top: $this.offset().top-$(window).scrollTop()+'px',
                width: $this.width()+'px',
                height: $this.height()+'px'
              });
              cover.click(function() {
                // process again because it may have changed by scroll or whatever
                cover.stop(true,true).animate({
                  left: $this.offset().left-$(window).scrollLeft()+'px',
                  top: $this.offset().top-$(window).scrollTop()+'px',
                  width: $this.width()+'px',
                  height: $this.height()+'px'
                }, settings.speed, function() {cover.remove();});
              });
              $('body').append(cover);
              cover.stop(true,true).animate({left: '0px', top: '0px', width: '100%', height: '100%'}, settings.speed);
            });
          });
        };
      })(jQuery);

      $(function() {
        $('img').cover();
      });
      
    </script>
  </head>
  <body>
    <img src='http://www.campbellhay.com/stash/FeatureBoxMedia/48/image.col1.jpg' data-cover="http://www.campbellhay.com/stash/PortfolioMedia/16/image.jpg" alt="picture" />
  </body>
</html>
